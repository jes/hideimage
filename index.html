<!doctype html>
<html>
    <head>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
        <title>Image Steganography</title>
    </head>
    <body onload="hideImage()">
        <div class="container">
            <div style="float:left">
            <h1>Image Steganography</h1>
            </div>

            <div style="float: left; margin-top: 35px">
            <a style="margin-left: 50px" href="#" data-toggle="modal" data-target="#infomodal">How it works</a>
            </div>

            <div style="clear:both"></div>
            <hr>

            <p>This is a tool to steganographically hide images inside the lower "bits" of other images.</p>
            <p>Select either "Hide image" or "Unhide image".</p>

            <div class="modal" id="infomodal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">How it works</h4>
                        </div>
                        <div class="modal-body">
                            <p>Each channel (red, green, blue) of each pixel in an image is represented by an 8-bit value. To hide the secret image
                            inside the cover image, we replace the <b>n</b> least significant bits of the cover pixel value with the same number of most significant
                            bits from the secret pixel value. Example, using 3 hidden bits:</p>
                            <p>Cover pixel: (167, 93, 27) == (<b>10100</b>111, <b>01011</b>101, <b>00011</b>011) <span style="background-color:rgb(167,93,27)">&nbsp;&nbsp;&nbsp;</span><br>
                            Secret pixel: (67, 200, 105) == (<b>010</b>00011, <b>110</b>01000, <b>011</b>01001) <span style="background-color:rgb(67,200,105)">&nbsp;&nbsp;&nbsp;</span><br>
                            Output pixel: (162, 94, 27) == (10100<b>010</b>, 01011<b>110</b>, 00011<b>011</b>) <span style="background-color:rgb(162,94,27)">&nbsp;&nbsp;&nbsp;</span>
                            </p>
                            <p>The output colour is almost indistinguishable from the cover colour, but now contains information
                            to extract an approximation of the secret pixel value, which gets padded with 0 to fill in the missing bits, so comes out to
                            (64, 192, 96) ==
                            (<b>010</b>00000, <b>110</b>00000, <b>011</b>00000) <span style="background-color:rgb(64,192,96)">&nbsp;&nbsp;&nbsp;</span>.</p>
                            <p>Using a larger number of hidden bits results in a better quality hidden image, but makes it easier to tell that the hidden
                            image is there.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row" style="padding-bottom: 20px">
                <div class="col-md-12">
                    <div class="btn-group">
                        <button class="btn btn-primary" id="hide-switch">Hide image</button>
                        <button class="btn btn-default" id="unhide-switch">Unhide image</button>
                    </div>
                </div>
                <!-- add another column here with a letterbox ad -->
            </div>

            <div id="hiderow" class="row">
                <div class="col-md-4">
                    <div style="height: 100px">
                        Cover image:<input type="file" id="cover"/><br>
                        Preset:
                        <select id="cover-preset">
                            <option value="na">N/A</option>
                            <option value="wikipedia-tree">Wikipedia Tree</option>
                            <option value="wikipedia-cat">Wikipedia Cat</option>
                            <option value="jes">James Stanley's face</option>
                            <option value="walrus">Walrus</option>
                        </select>
                    </div>
                    <canvas style="border: solid 1px black" width="300" height="300" id="covercanvas"></canvas>
                </div>

                <div class="col-md-4">
                    <div style="height: 100px">
                        Secret image:<input type="file" id="secret"/><br>
                        Preset:
                        <select id="secret-preset">
                            <option value="na">N/A</option>
                            <option value="wikipedia-tree">Wikipedia Tree</option>
                            <option value="wikipedia-cat">Wikipedia Cat</option>
                            <option value="jes">James Stanley's face</option>
                            <option value="walrus">Walrus</option>
                        </select>
                    </div>
                    <canvas style="border: solid 1px black" width="300" height="300" id="secretcanvas"></canvas>
                </div>

                <div class="col-md-4">
                    <div style="height: 100px">
                        Hidden bits:
                        <span id="bitsdisplay">1</span><div id="bits" style="margin-top: 10px; width: 300px"></div>
                        <button class="btn btn-default" style="margin-top: 10px" id="downloadbutton">Download Full-size Image</button>
                    </div>

                    <canvas style="border: solid 1px black" width="300" height="300" id="outputcanvas"></canvas>
                </div>
            </div>


            <div id="unhiderow" class="row">
                <div class="col-md-4">
                    <div style="height: 100px">
                        Image:<input type="file" id="stegimage"/><br>
                        Preset:
                        <select id="stegimage-preset">
                            <option value="na">N/A</option>
                            <option value="wikipedia-tree">Wikipedia Tree</option>
                            <option value="wikipedia-cat">Wikipedia Cat</option>
                            <option value="jes">James Stanley's face</option>
                            <option value="walrus">Walrus</option>
                        </select>
                    </div>
                    <canvas style="border: solid 1px black" width="300" height="300" id="stegcanvas"></canvas>
                </div>

                <div class="col-md-4">
                    <div style="height: 100px">
                        Hidden bits:
                        <span id="unhidebitsdisplay">1</span><div id="bits2" style="margin-top: 10px; width: 300px"></div>
                        <button class="btn btn-default" style="margin-top: 10px" id="downloadbutton2">Download Full-size Image</button>
                    </div>

                    <canvas style="border: solid 1px black" width="300" height="300" id="hiddencanvas"></canvas>

                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <hr>
                    <p>This is a project by <a href="http://incoherency.co.uk/">James Stanley</a>.</p>
                    <p>You can learn more about Steganography <a href="https://en.wikipedia.org/wiki/Steganography">on Wikipedia</a>.</p>
                </div>
            </div>

       

            <div class="modal" id="fullimgmodal" tabindex="-1" role="dialog">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">Save image</h4>
                        </div>
                        <div class="modal-body">
                            <span id="loadingspan"></span><br>
                            <img style="max-width: 100%" id="viewimg">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>



        <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <script type="text/javascript" src="hideimage.js"></script>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-40664549-1', 'auto');
          ga('send', 'pageview');

        </script>
    </body>
</html>
